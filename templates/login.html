{% extends "layout.html" %}

{% block body %}
<div class="row">
  <div class="col-xs-12">
    <form class="form-signin" onsubmit="submitForm(event);">
      <h2 class="form-signin-heading">Login</h2>
      <label for="inputEmail" class="sr-only">Email address</label>
      <input type="email" id="loginInputEmail" class="form-control" placeholder="Email address" required="" autofocus="">
      <label for="inputPassword" class="sr-only">Password</label>
      <input type="password" id="loginInputPassword" class="form-control" placeholder="Password" required="">
      <div class="checkbox">
        <label>
          <input type="checkbox" value="remember-me"> Remember me
        </label>
      </div>
      <button class="btn btn-md btn-primary btn-block" type="submit">Sign in</button>
    </form>
  </div><!-- col-xs-12 -->
</div><!-- /.row -->

<script>
  function submitForm(e) {
    e.preventDefault();

    var loginInfo = {
      username: $('#loginInputEmail').val(),
      password: $('#loginInputPassword').val()
    }

    console.log(loginInfo);

    $.ajax({
      type: "POST",
      url: "/auth",
      data: JSON.stringify(loginInfo),
      contentType:"application/json; charset=utf-8",
      dataType: 'json',
      success: function (msg) {
        if (typeof msg.redirect == 'string') {
          window.location = msg.redirect;
        }
      }
    });
  }
</script>
{% endblock %}
