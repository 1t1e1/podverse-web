<!doctype html>
<html itemscope itemtype="http://schema.org/Article">
  <head>
    <title>Podverse</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>

    <link rel="stylesheet" href="/static/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/node_modules/typeahead.js-bootstrap4-css/typeaheadjs.css">
    <link rel="stylesheet" href="/static/node_modules/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/node_modules/mediaelement/build/mediaelementplayer.css">
    <link rel="stylesheet" href="/static/css/style.css">

    <!-- TODO: This is weird, gotta be a better way. -->
    <script>
      window.isPlayerPage = false;
    </script>

    {% include "meta-tags.html" %}

  </head>
  <body>
    <div id="keep-footer-on-bottom">
      <nav class="navbar navbar-fixed-top">
        <div class="navbar-inner">
          <button class="navbar-toggler hidden-sm-up pull-xs-right" type="button" data-toggle="collapse" data-target="#collapsingNavbar">
            &#9776;
          </button>
          <a id="navbar-search-icon-xs" class="hidden-sm-up" data-toggle="modal" data-target="#navbarSearchModal">
            <i class="fa fa-search"></i>
          </a>
          <a class="navbar-brand" href="/">Podverse</a>
          <div class="clearfix"></div>
          <div class="collapse navbar-toggleable-xs" id="collapsingNavbar">
            <ul class="nav navbar-nav">
              <li id="login-btn" class="nav-item pull-xs-right">
                <!-- content added in scripts.js -->
              </li>
            </ul><!-- /.nav .navbar-nav -->
          </div><!-- /.collapse .navbar-toggleable-xs -->
        </div><!-- /.navbar-inner -->
      </nav>

      <!-- Puts a white overlay over body elements. This is here because elements
      cannot be truncated while they have display:none, yet we don't want to
      show these elements before they have finished being truncated. -->
      <div id="hide-until-truncation-finishes">
      </div>

      <div class="container padding-for-footer">
        {% block body %}{% endblock %}
      </div>

      <footer class="footer">
        <div style="max-width: 610px; margin: auto;">
          <div id="footer-links">
            <a href="/">Podverse <sup>FM</sup></a>
            <a href="/about">About</a>
            <a href="/mobile-app">Mobile App</a>
          </div>
          <div id="footer-license">
            <a href="https://www.gnu.org/licenses/agpl-3.0.en.html"><i class="fa fa-copyright fa-flip-horizontal"></i> AGPLv3</a>
          </div>
        </div>
      </footer>

      {% include "navbar-search-modal.html" %}

      {% include "add-podcast-modal.html" %}
    </div>

    <!-- Latest minor release -->
    <script src="https://cdn.auth0.com/js/lock/10.2/lock.min.js"></script>
    <!-- Latest patch release (recommended for production) -->
    <!-- <script src="http://cdn.auth0.com/js/lock/10.x.y/lock.min.js"></script> -->
    <script src="/static/build/vendors.js"></script>
    <script src="/static/build/bundle.js"></script>

    <script>
      // TODO: this is weird, should be a better way...
      if (isPlayerPage === true && isEmptyPlaylist !== true) {
        setPlayerInfo();
        // TODO: remove autoplay on mobile devices since they do not support autoplay
        // TODO: or find some kind of way to let autoplay be enabled in mobile browsers
        createAutoplayBtn();
        createAndAppendAudio();
        onScrollCondensePlayerView();
        initClipper();
      } else if (isPlayerPage === true && isEmptyPlaylist === true) {
        var isEmptyPlaylistEl = '<div id="empty-playlist-message">This playlist has no episodes or clips added to it. <br><br> Click the <i class="fa fa-list-ul"></i> icon while an episode or clip is playing to add it to a playlist.</div>';
        $(isEmptyPlaylistEl).insertAfter('#player');
      }

      addPlaylistItemTextTruncation();

      loadPodcastSearchTypeahead();
    </script>

  </body>
</html>
